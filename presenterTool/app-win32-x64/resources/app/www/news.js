!function(e){var t={init:function(){this.firstAdv=e(".first_adv"),this.secondeAdv=e(".second_adv"),this.left=e(".adv_24_left"),this.right=e(".adv_24_right"),this.pop=e(".weibo"),this.latestNews=e(".latest_news"),this.newsMessage=e(".news_message"),this.toNewNews=e(".to_new_news"),this.advObj={},this.newsDetail={},this.initId=location.href.split("?")[1].substring(3),this._init()},render:function(){var t=this;this.firstAdv.click(e.proxy(t._do,t)),this.secondeAdv.click(e.proxy(t._do,t)),this.left.click(e.proxy(t._do,t)),this.right.click(e.proxy(t._do,t)),this.toNewNews.click(e.proxy(t._doToNews,t))},_do:function(e){var t=this,s=/first/g,a=/second/g,i=/adv_24_left/g,n=/adv_24_right/g,o=e.target.parentNode;s.test(o.className)&&t.advObj.top&&window.open(t.advObj.top.url),a.test(o.className)&&t.advObj.bottom&&window.open(t.advObj.bottom.url),i.test(e.target.className)&&t.advObj.left&&window.open(t.advObj.left.url),n.test(e.target.className)&&t.advObj.right&&window.open(t.advObj.right.url)},_doToNews:function(e){"A"==e.target.nodeName&&(location.href="news.html?id="+e.target.className.substring(1)),"SPAN"==e.target.nodeName&&(location.href="news.html?id="+e.target.parentNode.className.substring(1))},_init:function(){var t=this;ajax("index/banner").then(function(s){t.advObj=s,t.advObj.top&&(e(".first_adv img")[0].src=t.advObj.top.cover),t.advObj.bottom&&(e(".second_adv img")[0].src=t.advObj.bottom.cover),t.advObj.left&&(e(".adv_24_left")[0].src=t.advObj.left.cover),t.advObj.right&&(e(".adv_24_right")[0].src=t.advObj.right.cover),t.render()}).catch(function(e){console.log(e)}),ajax("Article/index").then(function(s){t.popular=s.weibo,t.latest=s.news,t.fun().repeatPopular(t.popular,"news_weibo_item","hot",t.pop),t.fun().repeatPopular(t.latest,"news_weibo_item","latest_news",t.latestNews,1),e(".news_weibo_item").click(function(){location.href="news.html?id="+this.className.split(" ")[1].substring(1)})}).catch(function(e){console.log(e)}),ajax("Article/edit",{id:t.initId}).then(function(e){t.newsDetail=e,t.newsMessage[0].innerHTML='<div class="message_title">'+t.newsDetail.article.title+'</div><div class="message_author"><span>来源：'+t.newsDetail.article.source+"</span><span>"+t.newsDetail.article.create_time+"</span><span>文章作者："+t.newsDetail.article.author+'</span></div><div class="message_sub">'+t.newsDetail.article.subtitle+'</div><div class="message_content">me.newsDetail.article.content</div>';var s="";s+=t.newsDetail.previous.id?'<a class="i'+t.newsDetail.previous.id+'" href="javascript:"><span>上一篇：</span>'+t.newsDetail.previous.title+"</a>":"",s+=t.newsDetail.next.id?'<a class="i'+t.newsDetail.next.id+'" href="javascript:"><span>下一篇：</span>'+t.newsDetail.next.title+"</a>":"",t.toNewNews[0].innerHTML=s}).catch(function(e){console.log(e)})},fun:function(){return{repeatPopular:function(e,t,s,a,i){for(var n=document.createDocumentFragment(),o=0;o<e.length;o++){var r=document.createElement("div"),l=e[o].create_time.split(" ")[0],c=o<3?s:"",d=i?"":Number(o)+1;r.className=t+" i"+e[o].id,r.innerHTML='<span class="weibo_content '+c+'"><span>'+d+"</span>"+e[o].title+'</span><span class="weibo_date">'+l+"</span>",n.appendChild(r)}a[0].appendChild(n)}}}};e(document).ready(function(){t.init()})}($);